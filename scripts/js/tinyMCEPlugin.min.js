(function() {
    jQuery(document).ready(function($) {
        var assetUrl;
        return assetUrl = function(url) {
            return url = url.replace(url.substr(url.lastIndexOf("/") + 1), ""), url = url.substr(0, url.length - 1), 
            url = url.replace(url.substr(url.lastIndexOf("/") + 1), ""), url += "assets/";
        }, tinymce.create("tinymce.plugins.supercharts_plugin", {
            init: function(ed, url) {
                return ed.addButton("supercharts_button", {
                    title: "Insert SuperChart",
                    image: assetUrl(url) + "icon.png",
                    icon: !1,
                    onclick: function() {
                        var dialog, superchartsWizard;
                        return dialog = $('<div class="wizard"><div class="wizard-nav"><a onclick="supercharts.wizard.vent.trigger(\'showStep\', {step: \'insert\'});">Insert</a><a onclick="supercharts.wizard.vent.trigger(\'showStep\', {step: \'opts\'});">Options<div class="arrow-wrap"><div class="nav-arrow"></div></div></a><a onclick="supercharts.wizard.vent.trigger(\'showStep\', {step: \'data\'});">Data<div class="arrow-wrap"><div class="nav-arrow"></div></div></a><a onclick="supercharts.wizard.vent.trigger(\'showStep\', {step: \'type\'});">Type<div class="arrow-wrap"><div class="nav-arrow"></div></div></a><a class="active" onclick="supercharts.wizard.vent.trigger(\'showStep\', {step: \'name\'});">Name<div class="arrow-wrap"><div class="nav-arrow"></div></div></a></div><div class="wizard-main wizard-column wizard-row pattern"></div><div class="wizard-notification wizard-row">Message goes here.</div></div>'), 
                        $('<a type="button" class="close">&times;</a>').prependTo(dialog.find(".wizard-nav")).click(function() {
                            return Backbone.history.stop(), dialog.remove();
                        }), window.supercharts.baseURI = tinymce.baseURI, superchartsWizard = window.supercharts.init(ed), 
                        dialog.dialog({
                            title: "Insert new SuperChart",
                            dialogClass: "no-close wizard-dialog",
                            forceFullscreen: !0,
                            modal: !0,
                            width: "auto",
                            height: "auto",
                            draggable: !1,
                            open: function() {
                                return superchartsWizard.start();
                            },
                            close: function() {
                                return Backbone.history.stop();
                            }
                        });
                    }
                });
            }
        }), tinymce.PluginManager.add("supercharts_button", tinymce.plugins.supercharts_plugin);
    });
}).call(this);